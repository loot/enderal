# LOOT ignores anything that doesn't come under 'bash_tags', 'globals',
# 'groups', or 'plugins', so a section like 'common' is useful for storing
# data that gets re-used.
prelude:
  common:
  # Message Anchors
    - &alreadyInX
      type: error
      content: 'Delete. Already included in %1%.'

    - &alreadyInOrFixedByX
      type: error
      content: 'Delete. Already included or otherwise fixed in %1%.'

    - &runxLODGen
      type: say
      content: 'If you add, remove, or update plugins that alter WRLD/CELL records, remember to update this module with **xLODGen**.'

  # Cleaning Data Anchors
    - &quickClean
      util: '[EnderalEdit](https://www.nexusmods.com/enderal/mods/23/)'
      info: 'A guide to cleaning plugins using xEdit can be found [here](https://tes5edit.github.io/docs/7-mod-cleaning-and-error-checking.html#ThreeEasyStepstocleanMods).'

    - &reqManualFix
      util: '[EnderalEdit](https://www.nexusmods.com/enderal/mods/23/)'
      info: 'It is strongly recommended not to use mods that contain **deleted navmeshes** as they''re known to cause crashes. **Deleted navmeshes** must be corrected manually (a complex process that should be done by the mod author). More information on **deleted navmeshes** is provided [here](https://www.creationkit.com/index.php?title=Fixing_Navmesh_Deletion_Tutorial).'

  # Global Anchors
    - &latestLOOTThread
      type: say
      content: '[Latest LOOT thread](%1%).'
      subs: [ 'https://loot.github.io/latest-thread/' ]

common: []

bash_tags:
  - 'Actors.ACBS'
  - 'Actors.AIData'
  - 'Actors.AIPackages'
  - 'Actors.AIPackagesForceAdd'
  - 'Actors.CombatStyle'
  - 'Actors.DeathItem'
  - 'Actors.Perks.Add'
  - 'Actors.Perks.Change'
  - 'Actors.Perks.Remove'
  - 'Actors.RecordFlags'
  - 'Actors.Spells'
  - 'Actors.SpellsForceAdd'
  - 'Actors.Stats'
  - 'Actors.Voice'
  - 'C.Acoustic'
  - 'C.Climate'
  - 'C.Encounter'
  - 'C.ForceHideLand'
  - 'C.ImageSpace'
  - 'C.Light'
  - 'C.Location'
  - 'C.LockList'
  - 'C.MiscFlags'
  - 'C.Music'
  - 'C.Name'
  - 'C.Owner'
  - 'C.RecordFlags'
  - 'C.Regions'
  - 'C.SkyLighting'
  - 'C.Water'
  - 'Deactivate'
  - 'Delev'
  - 'Destructible'
  - 'EffectStats'
  - 'EnchantmentStats'
  - 'Factions'
  - 'Filter'
  - 'Graphics'
  - 'Invent.Add'
  - 'Invent.Change'
  - 'Invent.Remove'
  - 'Keywords'
  - 'MustBeActiveIfImported'
  - 'Names'
  - 'NoMerge'
  - 'NPC.AIPackageOverrides'
  - 'NPC.AttackRace'
  - 'NPC.Class'
  - 'NPC.CrimeFaction'
  - 'NPC.DefaultOutfit'
  - 'NPC.Race'
  - 'ObjectBounds'
  - 'Outfits.Add'
  - 'Outfits.Remove'
  - 'R.AddSpells'
  - 'R.Body-Size-F'
  - 'R.Body-Size-M'
  - 'R.ChangeSpells'
  - 'R.Description'
  - 'R.Skills'
  - 'R.Stats'
  - 'R.Voice-F'
  - 'R.Voice-M'
  - 'Relations.Add'
  - 'Relations.Change'
  - 'Relations.Remove'
  - 'Relev'
  - 'Sound'
  - 'SpellStats'
  - 'Stats'
  - 'Text'

globals:
# Latest LOOT Thread
  - &lootThread
    <<: *latestLOOTThread
    subs: [ 'https://loot.github.io/latest-thread/' ]

groups:
  - name: &dlcGroup DLC
    description: 'A group for official downloadable content.'

  - name: &fixesGroup Fixes & Resources
    description: 'A group for modules that fix issues and bugs or add resources for other mods.'
    after: [ *dlcGroup ]

  - name: default
    after: [ *fixesGroup ]

  - name: &worldSettingsGroup Worldspace Settings
    description: 'A group for modules that need to be loaded late to preserve worldspace settings.'
    after: [ default ]

  - name: &dynamicPatchGroup Dynamic Patches
    description: 'A group for patches that are dynamically generated by modding tools.'
    after: [ *worldSettingsGroup ]

  - name: &dynamicLODGroup Dynamic LOD
    description: 'A group for modules that add dynamic distant LOD for objects.'
    after: [ *dynamicPatchGroup ]

plugins:
###### Official Game Files ######
  - name: 'Update.esm'
    url:
      - 'https://store.steampowered.com/app/933480/Enderal_Forgotten_Stories/'
      - 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/'
    group: *dlcGroup
    clean:
      - crc: 0xF5E824B0
        util: 'EnderalEdit v4.0.3'
      - crc: 0x462828DF
        util: 'EnderalSEEdit v4.0.3g'
  - name: 'Dawnguard.esm'
    url: [ 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/' ]
    group: *dlcGroup
  - name: 'HearthFires.esm'
    url: [ 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/' ]
    group: *dlcGroup
  - name: 'Dragonborn.esm'
    url: [ 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/' ]
    group: *dlcGroup

  - name: 'Enderal - Forgotten Stories.esm'
    url:
      - 'https://store.steampowered.com/app/933480/Enderal_Forgotten_Stories/'
      - 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/'
    group: *dlcGroup
    tag:
      - Delev
      - Relev
    dirty:
      - <<: *quickClean
        crc: 0xB3DFC9F7
        util: '[EnderalEdit v4.0.3](https://www.nexusmods.com/enderal/mods/23)'
        itm: 5
        udr: 55
      - <<: *quickClean
        crc: 0xC7BC7AEA
        util: '[EnderalSEEdit v4.0.3g](https://www.nexusmods.com/enderalspecialedition/mods/78)'
        itm: 112
        udr: 61

  - name: 'SkyUI_SE.esp'
    url: [ 'https://store.steampowered.com/app/976620/Enderal_Forgotten_Stories_Special_Edition/' ]
    group: *dlcGroup

###### Fixes ######
  - name: 'Enderal - Bug Fixes.esp'
    url: [ 'https://www.nexusmods.com/enderal/mods/176/' ]
    group: *fixesGroup
    tag: [ Delev ]

  - name: 'Enderal SE - Bug Fixes.esp'
    url: [ 'https://www.nexusmods.com/enderalspecialedition/mods/2/' ]
    group: *fixesGroup
    tag: [ Delev ]

###### Modding Tools - Generated Files ######
  - name: 'Bashed Patch.*\.esp'
    url: [ 'https://www.nexusmods.com/enderal/mods/97/' ]
    group: *dynamicPatchGroup

  - name: 'DynDOLOD.esp'
    url:
      - link: 'https://www.nexusmods.com/skyrim/mods/59721/'
        name: 'Dynamic Distant Objects LOD - DynDOLOD'
    group: *dynamicLODGroup

  - name: 'Occlusion.esp'
    url:
      - link: 'https://stepmodifications.org/forum/topic/13451-xlodgen-terrain-lod-beta-76-for-fnv-fo3-fo4-fo4vr-tes5-sse-tes5vr-enderal-enderalse/'
        name: 'xLODGen Occlusion'
    group: *dynamicLODGroup
    after: [ 'DynDOLOD.esp' ]
    msg: [ *runxLODGen ]

###### Gameplay ######
  - name: 'Enderal - Dynamic Fast Travel.esp'
    url:
      - 'https://www.nexusmods.com/enderal/mods/120/'
      - 'https://www.nexusmods.com/enderalspecialedition/mods/16/'
    group: *worldSettingsGroup
    clean:
      - crc: 0xD6E63CF5
        util: 'EnderalEdit v4.0.3'
      - crc: 0x80C83D55
        util: 'EnderalSEEdit v4.0.3g'

###### Items ######
  - name: 'Enderal SE - Crossbows.esp'
    url: [ 'https://www.nexusmods.com/enderalspecialedition/mods/4/' ]
    tag:
      - Invent.Add
      - Invent.Remove
    msg:
      - <<: *alreadyInX
        subs: [ 'Enderal SE - Gameplay Overhaul.esp' ]
        condition: 'active("Enderal SE - Gameplay Overhaul.esp")'
    clean:
      - crc: 0x73625F44
        util: 'EnderalSEEdit v4.0.3g'
